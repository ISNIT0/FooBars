(function(){exports.parse=function(e,t,n){var r,i,l,a;return a=function(e,t){return new Function("return "+t).bind(e)()},i=new(require("html-entities").AllHtmlEntities),r=require("cheerio").load(i.decode(require("fs").readFileSync(e,"utf8"))),l=function(e,t,n){return r(e.match(/{{[^>#](.*?)}}/g)).map(function(){return e=e.replace(this,a(t,this.replace(/[{}]/g,"")))}),r(n).before(e)},r("show").map(function(e,n){return l(r("template[name="+r(n).attr("name")+"]").html(),t,n)}),r("if").map(function(e,n){return a(t,i.decode(r.html(n).split("<if ")[1].split(">")[0].replace(/["]/g,"")))?l(r(n).html(),t,n):void 0}),r("each").map(function(e,n){return a(t,i.decode(r(n).attr("of"))).map(function(e){return l(r(n).html(),e,n)})}),r("each, if, template").remove(),n(null,r.html().replace(/[\n]/g,""))||r.html().replace(/[\n]/g,"")}}).call(this);
