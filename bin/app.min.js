(function(){exports.parse=function(e,t,n){var r,i,a,o;return o=function(e,t){return new Function("return "+t).bind(e)()},i=new(require("html-entities").AllHtmlEntities),r=require("cheerio").load(i.decode(require("fs").readFileSync(e,"utf8"))),a=function(e,t,n){return r(e.match(/{{[^>#](.*?)}}/g)).map(function(){return e=e.replace(this,o(t,this.replace(/[{}]/g,"")))}),r(n).before(e)},r("show").map(function(e,n){return a(r("template[name="+r(n).attr("name")+"]").html(),t,n)}),r("if").map(function(e,n){return o(t,i.decode(r.html(n).split("<if ")[1].split(">")[0].replace(/["]/g,"")))?a(r(n).html(),t,n):void 0}),r("each").map(function(e,n){return o(t,i.decode(r(n).attr("of"))).map(function(e,t){return a(r(n).html(),t,n)})}),r("markdown").map(function(e,t){return r(t).before(require("node-markdown").Markdown(r(t).html()))}),r("show, each, if, template, markdown").remove(),n(null,r.html().replace(/[\n]/g,""))||r.html().replace(/[\n]/g,"")}}).call(this);
