(function(){exports.parse=function(e,n,t){var r,i,o,a,u,l,m;return i=require("html-entities").AllHtmlEntities,a=new i,o=require("cheerio"),m=function(e,n){return e.match(/{{[^>#](.*?)}}/g).map(function(t){return e.replace(t,new Function("return "+t.replace(/[{}]/g,"")).bind(n)())}).join("")},u=require("fs").readFileSync(e,"utf8"),l=a.decode(u),r=o.load(l),r("show").map(function(e,t){return r(t).before(m(r("template[name="+r(t).attr("name")+"]").html(),n)),r(t).remove(),r("template[name="+r(t).attr("name")+"]").remove()}),r("if").map(function(e,t){return new Function("return "+a.decode(r.html(t).split("<if ")[1]).split(">")[0].replace(/["]/g,"")).bind(n)()?(r(t).before(m(r(t).html(),n)),r(t).remove()):r(t).remove()}),r("each").map(function(e,t){return r(t).before((new Function("return "+a.decode(r(t).attr("of"))).bind(n)()||[]).map(function(e){return m(r(t).html(),e)})),r(t).remove()}),t(null,r.html().replace(/[\n]/g,""))||r.html().replace(/[\n]/g,"")}}).call(this);
